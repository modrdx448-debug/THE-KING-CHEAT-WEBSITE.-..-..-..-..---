<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>THE KING CHEAT OFC — User</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family:'Poppins',sans-serif;
    background:#0b0b0b;
    color:#fff;
    height:100vh;
    display:flex;
    flex-direction:column;
    overflow:hidden;
  }

  /* HEADER 200PX */
  .header{
    height:200px;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    z-index:3;
  }
  .logo{
    width:120px;height:120px;border-radius:50%;object-fit:cover;
    border:3px solid #00ffd5; box-shadow:0 0 20px #00ffd5;
  }
  .title{
    margin-top:8px;font-size:22px;font-weight:700;
    background:linear-gradient(90deg,#ff00ff,#00ff00,#00ccff);
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  }

  /* MIDDLE AREA */
  .middle{
    height:calc(100vh - 300px); /* 200 header + 100 footer */
    overflow:auto;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:14px;
    padding:18px;
    z-index:3;
  }
  .mid-btn{
    width:200px;
    padding:12px 18px;border-radius:10px;border:none;
    background:linear-gradient(90deg,#ff8cff,#6fffdc);
    color:#001; font-weight:700; cursor:pointer;
  }

  /* FOOTER FIXED CLEAN TRANSPARENT */
  .footer{
    height:100px;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    background:transparent;  /* ← FIX */
    border-top:1px solid rgba(255,255,255,0.04);
    z-index:3;
  }

  .social-row{
    display:flex;
    gap:18px;
    margin-bottom:8px;
    align-items:center;
    justify-content:center;
  }
  .social{
    padding:8px 14px;border-radius:8px;border:none;
    background:#00ffd5;color:#002;font-weight:700;cursor:pointer;
  }
  .footer-text{ font-weight:700; font-size:13px; opacity:0.9; }

  /* Particle background */
  canvas#particles{ position:fixed; left:0; top:0; width:100%; height:100%; z-index:0; display:block; }
</style>
</head>
<body>

<canvas id="particles"></canvas>

<!-- HEADER -->
<header class="header">
  <img class="logo" id="logoImg" src="https://i.supaimg.com/47f05d01-8673-49a2-9488-cfb90c34347b.jpg" alt="logo">
  <div class="title" id="userTitle">THE KING CHEAT OFC</div>
</header>

<!-- MIDDLE AREA -->
<main class="middle" id="middleArea"></main>

<!-- FOOTER -->
<footer class="footer">
  <div class="social-row">
    <button id="tgBtn" class="social" style="display:none">Telegram</button>
    <button id="ytBtn" class="social" style="display:none">YouTube</button>
    <button id="igBtn" class="social" style="display:none">Instagram</button>
  </div>
  <div class="footer-text" id="footerText">@THE KING CHEAT OFC 2025-26</div>
</footer>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyB_LaFUz-1QB_k4mEiODndjqdcYDbPFr2M",
  authDomain: "config-v9.firebaseapp.com",
  databaseURL: "https://config-v9-default-rtdb.firebaseio.com",
  projectId: "config-v9",
  storageBucket: "config-v9.appspot.com"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* Elements */
const middleArea = document.getElementById('middleArea');
const tgBtn = document.getElementById('tgBtn');
const ytBtn = document.getElementById('ytBtn');
const igBtn = document.getElementById('igBtn');
const userTitle = document.getElementById('userTitle');
const footerText = document.getElementById('footerText');

/* Title */
db.ref('userPanelTitle').on('value', snap=>{
  userTitle.innerText = snap.val() || "THE KING CHEAT OFC";
});

/* Footer Buttons */
db.ref('footerButtons').on('value', snap=>{
  const d = snap.val() || {};

  if(d.telegram){
    tgBtn.style.display='inline-block';
    tgBtn.onclick = ()=> window.open(d.telegram,'_blank');
  } else tgBtn.style.display='none';

  if(d.youtube){
    ytBtn.style.display='inline-block';
    ytBtn.onclick = ()=> window.open(d.youtube,'_blank');
  } else ytBtn.style.display='none';

  if(d.instagram){
    igBtn.style.display='inline-block';
    igBtn.onclick = ()=> window.open(d.instagram,'_blank');
  } else igBtn.style.display='none';
});

/* Middle Buttons */
db.ref('middleButtons').on('value', snap=>{
  middleArea.innerHTML = '';
  const obj = snap.val();
  if(!obj) return;

  Object.keys(obj).forEach(id=>{
    const item = obj[id];
    const b = document.createElement('button');
    b.className = 'mid-btn';
    b.innerText = item.name;
    b.onclick = ()=> window.open(item.url,'_blank');
    middleArea.appendChild(b);
  });
});

/* Particles */
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
let pColor="#00ffd5", bg="#0b0b0b", count=110, maxDist=110, speed=1.2;
let parts=[];

function resize(){ canvas.width=innerWidth; canvas.height=innerHeight; }
window.addEventListener("resize",resize); resize();

function init(){
  parts=[];
  for(let i=0;i<count;i++){
    parts.push({
      x:Math.random()*canvas.width,
      y:Math.random()*canvas.height,
      r:Math.random()*2+1,
      dx:(Math.random()-0.5)*speed,
      dy:(Math.random()-0.5)*speed
    })
  }
}

db.ref("settings").on("value",snap=>{
  const s=snap.val()||{};
  pColor=s.particleColor||pColor;
  bg=s.backgroundColor||bg;
  count=s.particleCount||count;
  maxDist=s.maxDistance||maxDist;
  speed=s.particleSpeed||speed;

  if(s.backgroundImage){
    document.body.style.backgroundImage=`url(${s.backgroundImage})`;
    document.body.style.backgroundSize="cover";
    document.body.style.backgroundRepeat="no-repeat";
  } else {
    document.body.style.backgroundImage="";
  }
  init();
});

function animate(){
  ctx.fillStyle=bg;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  for(let i=0;i<parts.length;i++){
    for(let j=i+1;j<parts.length;j++){
      const dx=parts[i].x - parts[j].x;
      const dy=parts[i].y - parts[j].y;
      const d=Math.sqrt(dx*dx+dy*dy);
      if(d<maxDist){
        ctx.strokeStyle=pColor+"55";
        ctx.beginPath();
        ctx.moveTo(parts[i].x,parts[i].y);
        ctx.lineTo(parts[j].x,parts[j].y);
        ctx.stroke();
      }
    }
  }

  for(let p of parts){
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle=pColor;
    ctx.fill();
    p.x+=p.dx; p.y+=p.dy;

    if(p.x<0||p.x>canvas.width) p.dx*=-1;
    if(p.y<0||p.y>canvas.height) p.dy*=-1;
  }
  requestAnimationFrame(animate);
}
init(); animate();
</script>

</body>
</html>
